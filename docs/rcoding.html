<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>R coding Exercise Gapminder, Tidyverse, and Plotting</title>

<script src="site_libs/header-attrs-2.10/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">My Data Analysis Portfolio</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="./aboutme.html">About Me</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Projects
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="./rcoding.html">R Coding</a>
    </li>
    <li>
      <a href="./visualization.html">Visualization</a>
    </li>
    <li>
      <a href="./tidytuesday.html">Tidy Tuesday</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/B-Cameron0/BrentCameron-MADA-portfolio">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">R coding Exercise Gapminder, Tidyverse, and Plotting</h1>

</div>


<p><strong>This exercise involves using the ‘gapminder’ data from the ‘dslabs’ package to plot, as well as using tidyverse to help organize the data to make it more accessible</strong></p>
<p><strong>Please note that for this code to work completely on part 2 that the original data (not the missing data) has been chosen</strong></p>
<p>First, we need to make sure all needed packages for the exercise are loaded using the command library(what we want to load), if not loaded (or you encounter an error of ‘x’ not found)- please install using the command install.packages(what you want to install)</p>
<p>For example, if dslabs is not installed you would use the command…install.packages(“dslabs”)</p>
<p><strong>PREPARATION</strong></p>
<p><strong>Loads dslabs package</strong> library(“dslabs”)</p>
<p><strong>Loads tidyverse (a collection of packages designed to help with cleaning data)</strong> library(“tidyverse”)</p>
<p><strong>Loads dplyr package (allows for a variety of functions used later)</strong> library(“dplyr”)</p>
<p><strong>Looks at help file for the gapminder data</strong> help(gapminder)</p>
<p><strong>Get an overview of the data structure</strong> str(gapminder)</p>
<p><strong>Get a summary of the data</strong> summary(gapminder)</p>
<p><strong>Determines the type of object gapminder is</strong> class(gapminder)</p>
<p><strong>PART 1</strong></p>
<p><strong>Filtering Data and creating New Variables</strong></p>
<p>We want to examine the data about African countries only, as a result, we will filter the data accordingly…</p>
<p><strong>Filter out data from all African countries (variable from continent= ‘Africa’) by using filter command, also use pipeline %&lt;% to create standardized chain of commands (This will allow for easier processing aka “do this then that” )</strong></p>
<p>Note that the first part of this code (africadata&lt;-gapminder) is needed due to the fact that we are assigning the African countries to a completely new object (africadata) for ease of analysis</p>
<p><strong>Creates new object and assigns all African countries to it</strong> africadata&lt;- gapminder %&gt;% filter (continent == ‘Africa’)</p>
<p>Next we will recheck the structure and summary of the new data</p>
<p>Note that since we are using the new object (africadata) we are no longer focusing the commands on gapminder</p>
<p><strong>Checks the structure and shows summary of the newly created object (africadata)</strong> str(africadata) summary(africadata)</p>
<p>Now that we have created a new object (africadata) and assigned all of the desired countries to it, we need to create new variables to help us analyze the data, in this example we will use the variables infant_mortality and Life_expectancy (which will be called INFMORT.LIFEEXP (variable 1)) and population and life_expectancy (which will be called POP.LIFEEXP (variable 2)).</p>
<p><strong>Note that we will use a similar command structure as when we assigned the gapminder data African countries to the new object africadata, only this time africadata will be replaced with our new desired objects (Variables 1 and 2 respectively)</strong></p>
<p>Please note that we also use the ‘select’ function as a way to choose which subset of variables we want to measure</p>
<p>We do not have to use the pipe function (%&gt;%) since we are not doing several things at once (assigning and filtering in the previous case of africadata)</p>
<p><em>Create another object (V1) in the africadata (object) with only infant mortality and life expectancy data</em></p>
<p>INFMORT.LIFEEXP &lt;- select(africadata, infant_mortality, life_expectancy)</p>
<p><strong>Create another object (V2) in the africadata (object) with only population and life expectancy data</strong></p>
<p>POP.LIFEEXP &lt;- select(africadata, population, life_expectancy)</p>
<p><strong>We will now check the structure and summary of the two new objects we have created:</strong></p>
<p>str(INFMORT.LIFEEXP) summary(INFMORT.LIFEEXP)</p>
<p>str(POP.LIFEEXP) summary(POP.LIFEEXP)</p>
<p><strong>PART 2</strong></p>
<p><strong>Plotting</strong></p>
<p>For this section we will plot the new variables created- life expectancy as a function of infant mortality and as a function of population size. We will make two separate plots to compare this.</p>
<p><strong>Note that since we are trying to create scatter plots (which means multiple commands) we will reuse the pipe function of %&gt;%, making sure to use our new objects</strong></p>
<p><strong>To create a scatter plot the command function ggplot(aes(x,y)) is used, with geom_point() being added to signal the creation of a line (x and y lab simply label the x and y axis respectively)</strong></p>
<p>First Scatterplot of life expectancy as a function of infant mortality</p>
<p>INFMORT.LIFEEXP %&gt;% ggplot(aes(x=infant_mortality,y=life_expectancy))+ geom_point() + xlab(‘Infant Mortality’) + ylab(‘Life Expectancy’)</p>
<p>Second Scatterplot of life expectancy as a function of population</p>
<p><strong>Note that here, the command scale_x_continous(trans = ‘log10’) is added along with the other commands. This is to set the x-axis to a log scale</strong></p>
<p>POP.LIFEEXP %&gt;% ggplot(aes(x=population, y=life_expectancy))+ scale_x_continuous(trans = ‘log10’)+ geom_point() + xlab(‘Population’) + ylab(‘Life Expectancy’)</p>
<p><strong>Notice that right now, due to multiple observation years for each country being reported, the data is disorganized and has formed ‘streaks’. To fix this, we must now narrow our data to a particular year.</strong></p>
<p><strong>We need to determine which years have missing data first to find the best year(s) for analysis. We can do this by utilizing the select funtion (to select the variable (year) and the variable that we are using the function for(infant_mortality)) combined with the filter command and the function (is.na), which is used to determine missing variables (na stands for non-applicable).</strong></p>
<p><strong>Note that we use the africadata object twice due to the fact that we are examining the newly created object itself rather than creating or assigning a new object.</strong></p>
<p>africadata &lt;- africadata %&gt;% select(year, infant_mortality) %&gt;% filter(is.na(infant_mortality))</p>
<p><strong>Now that we have determined that there are missing variables throughout the given years of the data set through 1981 and then again in 2016, we will go with thet year 2000 for the most accurate analysis.</strong></p>
<p>Now we will extract only the year 2000 from the data</p>
<p>africadata2000 &lt;- africadata %&gt;% filter(year == 2000)</p>
<p>Now we will once again view the structure and summary to verify correct observations</p>
<p>str(africadata2000) summary(africadata2000)</p>
<p>Now that the data has been analyzed with only yeay 2000 being considered, we must now repeat the process done earlier to plot the newly separated data</p>
<p><strong>Please note that since the new data is assigned the object name of africadata2000, the object names of INFMORT.LIFEEXP and POP.LIFEEXP from the first scatter plots are both replaced by africadata2000</strong></p>
<p><strong>First scatter plot with new data only for year 2000</strong></p>
<p>africadata2000 %&gt;% ggplot(aes(x=infant_mortality,y=life_expectancy))+ geom_point() + xlab(‘Infant Mortality’) + ylab(‘Life Expectancy’)</p>
<p><strong>Second scattter plot with new data only for year 2000</strong></p>
<p>africadata2000 %&gt;% ggplot(aes(x=population,y=life_expectancy))+ geom_point() + scale_x_continuous(trans = ‘log10’)+ xlab(‘population’) + ylab(‘Life Expectancy’)</p>
<p><strong>The new scatter plots seem to suggest a negative correlation between infant mortality and life expectancy (still), while there is no evident correlation between population size and life expectancy.</strong></p>
<p><strong>The last step we will need to do is to utilize linear regression models on both life expectancy and infant mortality, and life expectancy and population separately, to determine a possible link, if any.</strong></p>
<p><strong>To do this, we first establish the object names that we want to save the models to, which in this example will be ‘fit1’ and ‘fit2’. Next, we utilize the lm function with the x-axis variable going second (infant mortality and population respectively). Finally, we utilize the summary function to gain an understanding of the models computations.</strong></p>
<p>fit1 &lt;- lm(life_expectancy ~ infant_mortality, data = africadata2000)</p>
<p>fit2 &lt;- lm(life_expectancy ~ population, data = africadata2000)</p>
<p><strong>summarize</strong></p>
<p>summary(fit1) summary(fit2)</p>
<p><strong>Because of the final p-value of 2.826e-08 for the first model, which is less than 0.001, I can conclude that there exists a negative correlation between infant mortality and life expectancy, that is to say that for every unit of increase of infant mortality, life expectancy is predicted to decrease.</strong></p>
<p><strong>In the second model determining if there exists a link between population and life expectancy the p-value is greater than 0.005 at 0.6159, which indicates that there is no statistically significant link between population size and life expectancy.</strong></p>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
